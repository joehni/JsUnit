<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!--
JsUnit - a JUnit port for JavaScript
Copyright (C) 1999,2000,2001,2002,2003,2006,2007 Joerg Schaible
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<html><head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Internals</title>
<link href="JsUnit.css" rel="stylesheet" type="text/css">
</head><body>
<table width="100%" class="header"><tr>
<td width="100%"><div class="header"><span class="J">J</span><span class="s">s</span><span class="U">U</span>nit <small></small></div></td>
<td>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="joehni@mail.berlios.de">
<input type="hidden" name="item_name" value="JsUnit">
<input type="image" src="PayPal.png" border="0" name="submit" alt="Make a donation using PayPal">
</form></td>
<td><a href="http://developer.berlios.de/projects/jsunit"><img name="HeadBerliOS" src="berlios.png" width="118" height="52" border="0" alt="Project Developer Home"></a></td>
<td><a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border=0 width=110 height=52></a></td>
</tr></table>
<script type="text/javascript" language="JavaScript">
<!--
// Reference BerliOS if viewed in the web.
if(   window.location.protocol.indexOf( "http", 0 ) == 0
   && window.location.host != "localhost" 
   && window.location.host != "127.0.0.1" )
{
    document.HeadBerliOS.src = "http://developer.berlios.de/sflogo.php?group_id=158&type=1";
}
//-->
</script>
<hr>
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Internals </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="developer"></a>
Internal Developer's Guide</h1>
<h2><a class="anchor" id="docConv"></a>
Document Conventions</h2>
<p>The documentation of JavaScript code follows the JavaDoc conventions. The generation is done using a Perl script generating Pseudo C++ code with the comments that is processed afterwards with DoxyGen. A lot of the features of DoxyGen are supported including the QT style of the comments. See following chapter how to generate the documentation.</p>
<ul>
<li>
<a href="http://www.doxygen.org">Doxygen</a> </li>
</ul>
<p>Documentation blocks within the code are embedded with:</p>
 
<div class="fragment"><pre>
&#47;**
&nbsp;*
&nbsp;*&#47;</pre></div>
<p>First element of such a block has to be a tag identifying the documented element or is directly a brief description of the next code element. Within the code following elements are supported:</p>
<ul>
<li>
@class </li>
<li>
@ctor </li>
<li>
@file </li>
<li>
@fn </li>
<li>
@interface </li>
<li>
@var </li>
</ul>
<p>Other elements like <em>@type</em> or <em>@enum</em> are ignored. The element type <em>@ctor</em> is introduced by the Perl script to allow a separate description of the class' constructor that is simply the initializer function of the class. The class itself is identified by assigning elements to its prototype. For an interface only functions should be added to the prototype.</p>
<p>Unlike C++ JavaScript has no idea about variable or function types. Since this information is nevertheless valuable for the documentation the script supports some tags that allow the type specification to be generated in the pseudo code:</p>
<ul>
<li>
</li>
</ul>
<p><em>@tparam TYPE PARAM COMMENT</em><br/>
This command sets the type of a parameter. It is replaced in the documentation comment with the <em>@param PARAM COMMENT</em> command (without the <em>TYPE</em>).</p>
<p><em>@tparam TYPE COMMENT</em><br/>
This command sets the return type of a function. It is replaced in the documentation comment with the <em>@return COMMENT</em> command (without the <em>TYPE</em>). This comand is a short cut of the normal <em>@return</em> command and the <em>@type</em> command supported by this program.</p>
<p><em>@type TYPE</em><br/>
This command sets the type of a variable or the return type of a function. </p>
<p>Keep in mind that C++ pseudo code is produced. Unlike in C++ it is quite not clear which elements will belong in the end to a class. Therefore the script cannot support the grouping commands of DoxyGen.</p>
<h2><a class="anchor" id="docScript"></a>
Script Manual</h2>
<pre>
NAME
    js2doxy - utility to convert JavaScript into something Doxygen can
    understand

SYNOPSIS
     js2doxy.pl < file.js > file.cpp
     js2doxy.pl [Options] file.js

     Options:

     -?     Print usage
     -d, --debug    Debug mode
     -h, --help Show manual
     -v, --version  Print version

OPTIONS
    -?      Prints the usage of the script.

    --debug Prints internal states to the error stream. States are triggered
            by single bits:

             Bit 0: Dump (1)
             Bit 1: Database (2)
             Bit 2: Detector (4)
             Bit 3: Parser (8)
             Bit 4: Scanner (16)

    --help  Shows the manual pages of the script using perldoc.

    --version
            Print the version of the utility and exits.

DESCRIPTION
    This program will read from standard input or from the given input file
    and convert the input into pseudo C++ that can be understood by help
    generator Doxygen. The program parses the JavaScript and tries to attach
    the correct documentation comments. Any unattached comment is placed
    into file scope.

HELP COMMANDS
    The program will accept some additional help commands to produce better
    C++:

    \ctor   This command starts the description of the constructor. It can
            be placed within the documentation comment for a class. It may
            be used also as first command in such a comment.

    \tparam TYPE PARAM COMMENT
            This command sets the type of a parameter. It is replaced in the
            documentation comment with the \param PARAM COMMENT command
            (without the TYPE). The program will use the type information in
            the generated C++ code. It may not be the first command in a
            documentation comment.

    \treturn TYPE COMMENT
            This command sets the return type of a function. It is replaced
            in the documentation comment with the \return COMMENT command
            (without the TYPE). The program will use the type information in
            the generated C++ code. It may not be the first command in a
            documentation comment. This comand is a short cut of the normal
            \return command and the \type command supported by this program.

    \type TYPE
            This command sets the type of a variable or the return type of a
            function. It may not be the first command in a documentation
            comment.

LIMITATIONS
    The program uses internally a has map for the database. Therefore the
    sequence of the identified elements is by chance and the grouping
    commands of Doxygen are not supported.

    The program does currently not support single line documentation blocks
    or documentation blocks that *follow* the declaration:

     ///
     //!
     /**< */
     ///<
     /*!< */
     //!< */


</pre><h2><a class="anchor" id="docGen"></a>
Rebuilding Documentation</h2>
<p>Like everyone I am not very keen on writing documentation. The best way I can live with it is the way javadoc supports this. Luckily there are some other tools out there that can be used for other languages, but most of these tools are only available for object-oriented languages. While JavaScript allows to write object-oriented code, most people are not aware of this. Therefore I use a perl script to transform JavaScript code that follow the coding conventions above in some kind of pseudo C++ that can be used to fool Doxygen, my favorite non-Java source code documentation tool.</p>
<p>Use the script <em>jsdoc</em> to rebuild the documentation. It is located in the util directory. It depends on a Unix environment including Perl. In Windows I personally use Cygwin that comes nowadays with quite complete Unix packages. Additionally you have to install Doxygen and Graphviz a cross-platform drawing toolkit from AT&amp;T. My script expects both tools either in the PATH or at /opt/doxygen and /opt/graphviz. In Windows I have mounted my Windows program files folder to /opt using Cygwin functionality. (Nowadays Cygwin offers also doxygen as prebuild package, but it is quite outdated and works only at binary mounts.)</p>
<ul>
<li>
<a href="http://www.cygwin.com">Cygwin</a> </li>
<li>
<a href="http://www.doxygen.org">Doxygen</a> </li>
<li>
<a href="http://www.research.att.com/sw/tools/graphviz/">Graphviz</a> </li>
</ul>
<p>My script will call the Perl script <em>js2doxy.pl</em> to generate pseudo C++. Then it calls Doxygen to generate the first version of the HTML documentation. At last text processing is done with <em>sed</em> to generate the JsUnit color style in the headers.</p>
</div></div><!-- contents -->
<hr>
<table width="100%" class="header">
    <tr>
        <td>
            <div align="left">
            <small>JsUnit &copy; 1999, 2000, 2001, 2002, 2003, 2006, 2007 by J&ouml;rg Schaible</small>
            </div>
        </td>
        <td>
            <div align="right">
                <small>Generated on Wed Apr 15 2015 02:33:06 for <b>JsUnit</b> by <a href="http://www.doxygen.org/index.html">doxygen</a> 1.8.5</small>
            </div>
        </td>
    </tr>
</table>
</body>
</html>
